<form>

    <!-- 
        Reversed order because HTML selects the first button as the form submit on enter button.
        When not reversed this makes the first button the dialog button, and that is unintuitive.
        In the css this is done by setting the display of the form to flex and the flex direction to column-reverse.
    -->

    @if (!route_instance) {
        <button mat-flat-button color="secondary" (click)="next()">Next</button>

        <mat-form-field>
            <mat-label>Instance id</mat-label>
            <input matInput id="instance-id" [(ngModel)]="instance" [ngModelOptions]="{standalone: true}" required [matAutocomplete]="auto">

            <mat-autocomplete #auto="matAutocomplete">
                @for (instance of instances; track instance) {
                  <mat-option [value]="instance">{{instance}}</mat-option>
                }
            </mat-autocomplete>

            <button mat-icon-button matSuffix (click)="openInstanceidDialog()">
                <mat-icon>help</mat-icon>
            </button>
        </mat-form-field>
    } @else {

        <button mat-flat-button color="secondary" (click)="submit()">Login</button>
        <mat-checkbox [(ngModel)]="remember_token" [ngModelOptions]="{standalone: true}">Stay logged in</mat-checkbox>

        <mat-form-field>
            <mat-label>Linkcode</mat-label>
            <input matInput id="linkcode" type="password" [(ngModel)]="linkcode" [ngModelOptions]="{standalone: true}" required>

            <button mat-icon-button matSuffix (click)="openLinkcodeDialog()">
                <mat-icon>help</mat-icon>
            </button>
        </mat-form-field>
    }

</form>